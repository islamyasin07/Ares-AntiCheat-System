<div class="report-container">
  <div class="report-header">
    <h2>Analytics Report</h2>
    <p>Batch analytics (Spark CSV) and summaries</p>
  </div>

  <div *ngIf="loading" class="loading">Loading analytics...</div>

  <div *ngIf="!loading">
    <section class="cards">
      <div class="card">
        <h3>Top Cheaters</h3>
        <div *ngIf="topCheaters.length === 0">No top cheaters data available.</div>
        <ul *ngIf="topCheaters.length > 0">
          <li *ngFor="let p of topCheaters">
            {{ p.playerId || p._c0 || 'player' }} — {{ p.suspicious_events_count || p.count || p._c1 || 0 }}
          </li>
        </ul>
      </div>

      <div class="card">
        <h3>Cheat Distribution</h3>
        <div *ngIf="cheatDistribution.length === 0">No distribution data available.</div>
        <ul *ngIf="cheatDistribution.length > 0">
          <li *ngFor="let c of cheatDistribution">
            {{ c.ruleTriggered || c.cheatType || c._c0 || 'Unknown' }} — {{ c.occurrence || c.count || c._c1 || 0 }}
          </li>
        </ul>
      </div>

      <div class="card">
        <h3>Hourly Events</h3>
        <div *ngIf="hourlyEvents.length === 0">No hourly data.</div>
        <ul *ngIf="hourlyEvents.length > 0">
          <li *ngFor="let h of hourlyEvents">
            {{ h.hour || h._c0 || 'hour' }} — {{ h.events_volume || h.count || h._c1 || 0 }}
          </li>
        </ul>
      </div>

      <div class="card">
        <h3>Avg Speed</h3>
        <div *ngIf="avgSpeed.length === 0">No speed data.</div>
        <ul *ngIf="avgSpeed.length > 0">
          <li *ngFor="let s of avgSpeed">
            {{ s.playerId || s._c0 || 'player' }} — {{ s.average_speed || s.avg || s._c1 || 0 }}
          </li>
        </ul>
      </div>
    </section>
  </div>
</div>
