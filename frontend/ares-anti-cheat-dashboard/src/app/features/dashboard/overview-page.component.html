<div class="space-y-4">

  <ng-container *ngIf="stats$ | async as s">

    <!-- TOP CARDS -->
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-3">
      <app-stat-card title="Total Events" [value]="s.totalEvents" color="neonBlue"></app-stat-card>
      <app-stat-card title="Suspicious Events" [value]="s.totalSuspicious" color="neonPink"></app-stat-card>
      <app-stat-card title="Flagged Players" [value]="s.flaggedPlayers" color="neonPurple"></app-stat-card>
      <app-stat-card title="Live Players" [value]="s.livePlayers" color="softWhite"></app-stat-card>
    </div>

    <!-- ROW 1: PIE + LINE CHART -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-3">

      <!-- Pie Chart -->
      <app-glow-card class="h-[240px] overflow-hidden">
        <h2 class="text-sm mb-2 font-orbitron text-neonPurple">Cheat Types</h2>
        <div class="h-[180px]">
          <app-ares-pie-chart
            [labels]="cheat_labels"
            [data]="cheat_counts">
          </app-ares-pie-chart>
        </div>
      </app-glow-card>

      <!-- Line Chart -->
      <app-glow-card class="lg:col-span-2 h-[240px]">
        <h2 class="text-sm mb-2 font-orbitron text-neonBlue">Suspicious per Minute</h2>
        <div class="h-[180px]">
          <app-ares-line-chart
            [labels]="labels_perMinute"
            [data]="data_perMinute">
          </app-ares-line-chart>
        </div>
      </app-glow-card>

    </div>

    <!-- ROW 2: HEATMAP -->
    <app-glow-card class="h-[140px]">
      <h2 class="text-sm mb-2 font-orbitron text-neonBlue">Activity Heatmap (24h)</h2>
      <div class="h-[90px]">
        <app-ares-heatmap [values]="hourly_heatmap"></app-ares-heatmap>
      </div>
    </app-glow-card>

    <!-- ROW 3: TOP PLAYERS -->
    <app-glow-card class="h-[240px]">
      <h2 class="text-sm mb-2 font-orbitron text-neonPurple">Top Players</h2>
      <ul class="space-y-1">
        <li *ngFor="let player of topPlayers$ | async" class="flex justify-between">
          <span class="text-softWhite">{{ player.name }} ({{ player.rank }})</span>
          <span class="text-neonPink">{{ player.suspiciousEvents }} suspicious events</span>
        </li>
      </ul>
    </app-glow-card>

  </ng-container>

</div>
